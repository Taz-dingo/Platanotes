---
title: 自然噪波圆
date: 2022-05-29 11:21:43
categories: 学习
tags: [Processing,Java,Python]
---

这是一场意外~上学期误抢了Python公选课，听说会自动退课我就没管了。结果这学期直到上了几周课后我才发现这货还在我的课表里躺着。。。但是这学期忙死了完全不想上这课（说白了就是懒），想着挂了算了，但是又看到大作业占成绩70%——嘿嘿，做好了不就直接飘过？

于是就有了这个作业。

{% gp 2-2%}

![5](https://tazdingo-images.oss-cn-hongkong.aliyuncs.com/img/202401270030319.png)

![木纹](https://tazdingo-images.oss-cn-hongkong.aliyuncs.com/img/202401270030453.png)

{% endgp %}

<!--more-->

{% note info %}

**说在前面**

这次也是站在了巨人的肩膀上。再次感谢[おかず](https://note.com/outburst)大佬的代码思路，其实说白了我只是在他的工作[^1]上调了一些参数而已。

我的代码可以在[仓库](https://github.com/Taz-dingo/GenerativeArt01)看，包括Java版和Python版。

{% endnote %}

## 原理

### 粒子轨迹绘图，混合模式

和我之前做的**燃烧的大哥**插图一样，利用粒子移动留下的轨迹绘图。

混合模式选用了ADD，官方文档解释是：

> ADD - additive blending with white clip: **C = min(A\*factor + B, 255)**

简单来说就是粒子轨迹叠加时会变得更亮（最高可以到达亮度上限），可以说**这是好看效果的半个灵魂。**而另外一半就是颜色了。

（混合模式控光，颜色模式控色，合在一起就可以表现出很精彩的效果）

### 圆内外不同轨迹

也很简单，写一个函数判断粒子在圆内还是圆外，内、外粒子按照不同参数，不同法则运动，就可以产生不同的效果。

### 随机生成不重叠的圆

1. 准备一个**容器存放各个圆的坐标、半径信息**。
2. 随机生成圆的圆心坐标、半径。
3. **遍历容器内所有的圆**，判断新生成的圆**是否与容器内的圆重叠**。
4. 如果重叠，返回第2步；否则圆数量计数器+1再返回第2步。

## 代码实现

### 1. 随机生成粒子

![circle1](https://tazdingo-images.oss-cn-hongkong.aliyuncs.com/img/202401270030181.png)

```python
partList = [] #粒子集合
partNums = 6000 #粒子数量
.
.
.
def newParticles():
    del partList[:]  #先清空列表
    for i in range(partNums):  
        #循环生成partNums个粒子
        partList.append(Particle())
```


```python
class Particle: #粒子类
    def __init__(self):
    	#随机生成坐标
        self.pos = PVector(random(width),random(height))  
        
    def show(self):
        #在粒子所在坐标画圆
        circle(self.pos.x, self.pos.y, 5)  
```

### 2. 粒子根据noise()移动

![circle2](https://tazdingo-images.oss-cn-hongkong.aliyuncs.com/img/202401270030481.png)

```python
def move(self):
        self.angle = noise(self.pos.x/noiseScale , self.pos.y/noiseScale ) * noiseStrength  
        #根据x、y坐标二维noise()，计算角度
        self.pos.x += cos(self.angle) #根据横向移动
        self.pos.y += sin(self.angle) #根据纵向移动
```

### 3. 撞墙检测、圆内圆外轨迹不同

![circle3](https://tazdingo-images.oss-cn-hongkong.aliyuncs.com/img/202401270031226.png)

###  4. 调整混色模式

![circle4](https://tazdingo-images.oss-cn-hongkong.aliyuncs.com/img/202401270031015.png)

```python
blendMode(ADD) 
#混色模式ADD（增加）效果是让轨迹重叠时变的更亮
colorMode(HSB,360,100,100,60) 
#颜色模式HSB（参数分别是色相、饱和度、明度；最后一个参数是alpha，也就是不透明度）
```

### 5. 生成多个不重复的圆，调整参数

下面是调出来感觉不错的一些参数：

![0](https://tazdingo-images.oss-cn-hongkong.aliyuncs.com/img/202401270031690.png)

```python
noiseScale1 = 800;  //噪声比例
noiseStrength1 = 90;  //噪声强度
noiseZ = 0.00;

noiseScale2 = 62000;  
noiseStrength2 = 360;  
.
.
.
fill(map(noise(self.angle), 0, 1, 140, 300), 60, 60, 15);  //蓝
```

![1](https://tazdingo-images.oss-cn-hongkong.aliyuncs.com/img/202401270031667.png)

```python
noiseScale1 = 800;  //噪声比例    
noiseStrength1 = 90;  //噪声强度
noiseZ = 0.001;

noiseScale2 = 8000;  
noiseStrength2 = 90;  
.
.
.
fill(map(noise(self.angle), 0, 1, 0, 100), 60, 60, 15); //金
```

![木纹](https://tazdingo-images.oss-cn-hongkong.aliyuncs.com/img/202401270031936.png)

```python
noiseScale1 = 800;  //噪声比例    
noiseStrength1 = 90;  //噪声强度
noiseZ = 0.001;

noiseScale2 = 8000;  
noiseStrength2 = 9000;  
.
.
.
fill(map(noise(self.angle), 0, 1, 140, 300), 60, 60, 15);  //蓝
```

![3](https://tazdingo-images.oss-cn-hongkong.aliyuncs.com/img/202401270031453.png)

```python
noiseScale1 = 80;  //噪声比例   
noiseStrength1 = 9;  //噪声强度
noiseZ = 0.005;

noiseScale2 = 62000;  
noiseStrength2 = 9;  
.
.
.
fill(map(noise(self.angle), 0, 1, 0, 55), 87, 75, 15); //大哥配色
```

![4](https://tazdingo-images.oss-cn-hongkong.aliyuncs.com/img/202401270031350.png)

```python
noiseScale1 = 800;  //噪声比例   
noiseStrength1 = 90;  //噪声强度
noiseZ = 0.001;

noiseScale2 = 8000;  
noiseStrength2 = 900;  
.
.
.
fill(map(noise(self.angle), 0, 1, 210, 360), 60, 60, 15); //紫
```

![星云](https://tazdingo-images.oss-cn-hongkong.aliyuncs.com/img/202401270032431.png)

```python
noiseScale1 = 8000;  //噪声比例   
noiseStrength1 = 90;  //噪声强度
noiseZ = 0.00;

noiseScale2 = 800;  
noiseStrength2 = 3000;  
.
.
.
fill(map(noise(self.angle), 0, 1, 0, 300), 60, 60, 15); //绿
```



[^1]:おかず.[Generative Art #147](https://note.com/outburst/n/n0722395b8977)

