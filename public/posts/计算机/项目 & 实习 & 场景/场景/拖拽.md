---
created: 星期四, 九月 5日 2024, 4:40:48 下午, 1725525648000
modified: 星期四, 九月 5日 2024, 4:40:48 下午, 1725525648000
---

TAG: 场景
DECK: 前端
## 拖拽
- 简单场景可以使用 HTML5 原生 `Drag and Drop` API。
- 复杂场景或自定义拖拽行为时，可以使用鼠标事件实现。
- 更复杂的需求或跨浏览器兼容性问题时，可以考虑使用第三方库。

---
### 1. **HTML5 原生 Drag and Drop API**
HTML5 提供了原生的 `Drag and Drop` API，适用于需要将元素拖放到其他元素的场景。

主要事件：
- `dragstart`: 当开始拖拽时触发。
- `drag`: 拖拽过程中持续触发。
- `dragend`: 拖拽结束时触发。
	
- `dragenter`: 被拖拽元素进入目标元素时触发。
- `dragover`: 拖拽元素在目标元素上方时持续触发（常用于设置 `event.preventDefault()` 允许放置元素）。
- `dragleave`: 被拖拽元素离开目标元素时触发。
- `drop`: 在目标元素上放下时触发。

示例代码：

```html
<div id="drag-item" draggable="true">拖动我</div>
<div id="drop-zone">放到这里</div>

<script>
  const dragItem = document.getElementById('drag-item');
  const dropZone = document.getElementById('drop-zone');

  dragItem.addEventListener('dragstart', (event) => {
    event.dataTransfer.setData('text', event.target.id);
  });

  dropZone.addEventListener('dragover', (event) => {
    event.preventDefault();
  });

  dropZone.addEventListener('drop', (event) => {
    event.preventDefault();
    const data = event.dataTransfer.getData('text');
    const draggedItem = document.getElementById(data);
    dropZone.appendChild(draggedItem);
  });
</script>
```

### 2. **基于鼠标事件的拖拽**
利用鼠标事件（`mousedown`，`mousemove`，`mouseup`）可以实现更加灵活的拖拽控制，比如在复杂的布局或自定义拖拽行为时使用。

主要步骤：
- 在元素上监听 `mousedown` 事件，记录初始鼠标位置和元素位置。
- 在 `mousemove` 事件中根据鼠标的移动动态改变元素的 `left` 和 `top`。
- 在 `mouseup` 事件中结束拖拽，并移除 `mousemove` 的监听。

示例代码：

```html
<div id="drag-item" style="width: 100px; height: 100px; background: #f00; position: absolute;">拖动我</div>

<script>
  const dragItem = document.getElementById('drag-item');
  let isDragging = false;
  let offsetX = 0;
  let offsetY = 0;

  dragItem.addEventListener('mousedown', (event) => {
    isDragging = true;
    offsetX = event.clientX - dragItem.offsetLeft;
    offsetY = event.clientY - dragItem.offsetTop;
    document.addEventListener('mousemove', onMouseMove);
  });

  document.addEventListener('mouseup', () => {
    isDragging = false;
    document.removeEventListener('mousemove', onMouseMove);
  });

  function onMouseMove(event) {
    if (isDragging) {
      dragItem.style.left = `${event.clientX - offsetX}px`;
      dragItem.style.top = `${event.clientY - offsetY}px`;
    }
  }
</script>
```

### 3. **第三方库**
有时为了更好的浏览器兼容性或丰富的拖拽功能，可以使用第三方库，如：
- [React DnD](https://react-dnd.github.io/react-dnd/)：用于 React 的高级拖拽库，支持复杂的拖拽交互和自定义行为。
- [interact.js](https://interactjs.io/)：支持拖拽、缩放、旋转等交互行为的库，具有良好的性能和易用性。
- [SortableJS](https://sortablejs.github.io/Sortable/)：适用于拖拽排序的轻量级库，支持 DOM 列表排序。

这些库可以简化开发工作，并提供一些额外的功能，如网格对齐、拖拽边界等。

### 总结
- 