---
created: 星期四, 八月 22日 2024, 10:28:45 晚上, 1724336925000
modified: 星期四, 八月 22日 2024, 10:28:45 晚上, 1724336925000
---

TAG: 网络
DECK: 前端
## HTTP

| 版本       | 引入年份  | 主要特性                                 | 性能改进                                         |
| -------- | ----- | ------------------------------------ | -------------------------------------------- |
| HTTP/0.9 | 1991  | 仅支持 GET 请求，无请求头和响应头，只能传输 HTML        | 基础功能，适用于最初的 Web 页面                           |
| HTTP/1.0 | 1996  | 支持**多种请求方法**，支持**请求/响应头**，**多种数据格式** | 更丰富的功能，但每个请求都需要新连接                           |
| HTTP/1.1 | 1997  | **持久连接**、管线化、虚拟主机、**缓存控制**           | 提高并发处理能力（但是**队头阻塞**，浏览器限制每个域名6个TCP连接），减少连接开销 |
| HTTP/2   | 2015  | 多路复用、二进制传输、头部压缩、服务器推送                | 解决队头阻塞，大幅提升性能和并行处理能力                         |
| HTTP/3   | 2019+ | 基于 QUIC（UDP）、连接迁移、**内置加密**、**无队头阻塞** | 更低延迟，更快握手，更好适应移动网络                           |
|          |       |                                      |                                              |

从 HTTP/1.0 到 HTTP/3 的演变过程，HTTP 协议不断改进以提升性能、安全性和用户体验。HTTP/2 和 HTTP/3 尤其专注于解决并发性和延迟问题，显著提高了现代 Web 应用的加载速度。

### 概览

- 简单快速：客户向服务器请求服务时，只需传送请求方法和路径。由于HTTP协议简单，使得HTTP服务器的程序规模小，因而通信速度很快
    
- 灵活：HTTP允许传输任意类型的数据对象。正在传输的类型由Content-Type加以标记
    
- 无连接：无连接的含义是限制每次连接只处理一个请求。服务器处理完客户的请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间
    
- 无状态：HTTP协议无法根据之前的状态进行本次的请求处理

---
### 1. **HTTP/0.9 (1991)**

这是最早的 HTTP 版本，主要用于传输简单的 HTML 页面。它非常简洁，但也存在很多局限性。

#### 特性：

- **只支持 GET 请求**：HTTP/0.9 仅支持 `GET` 请求，只能用于请求网页。
- **无请求头、响应头**：请求和响应都是纯文本，浏览器请求时只发送一个简单的 URL。
- **只能传输 HTML**：只能传输纯文本格式的 HTML 页面，无法传输图像、脚本等资源。
- **无状态**：HTTP 是一个无状态的协议，这意味着每次请求都是独立的，没有会话管理。

HTTP/0.9 非常基础，无法满足现代 Web 应用的需求。

### 2. **HTTP/1.0 (1996)**

随着 Web 的发展，HTTP/1.0 对 HTTP/0.9 进行了大幅度改进，支持更多的功能，成为第一个广泛使用的 HTTP 版本。

#### 新增特性：

- **支持更多请求方法**：除了 `GET`，还引入了 `POST` 和 `HEAD` 方法。
- **支持 HTTP 请求头和响应头**：可以传递元数据（如内容类型、内容长度、缓存控制等），为更加复杂的交互提供支持。
- **支持多种数据格式**：不仅仅局限于 HTML，还可以传输图像、音频、视频等多种类型的资源。
- **状态码**：引入状态码（如 200、404、500 等）来明确描述服务器的响应状态。
- **无持久连接**：每次请求都会建立一个新的 TCP 连接，响应结束后立即关闭。这种方式使得每个资源请求都会有额外的连接开销。

#### 局限性：

- 每个请求都需要重新建立连接，尤其在图片较多的页面，开销很大，导致性能瓶颈。

### 3. **HTTP/1.1 (1997)**

HTTP/1.1 是目前 Web 上仍然被广泛使用的 HTTP 版本，它在 HTTP/1.0 的基础上进行了进一步优化，解决了性能和扩展性的问题。

#### 新增和改进的特性：

- **持久连接**：默认使用持久连接（Keep-Alive），这意味着在同一 TCP 连接上可以处理多个请求，从而减少了重复建立和关闭连接的开销。
- **管线化（Pipelining）**：允许在同一个 TCP 连接上发送多个请求，而不必等待前一个请求的响应（减少了网络延迟），但由于队头阻塞问题，该特性未得到广泛应用。
- **分块传输编码**：支持传输动态生成的内容，服务器可以边生成边发送，不必等待整个响应生成完毕。
- **更多的请求方法**：增加了 `PUT`、`DELETE`、`OPTIONS`、`TRACE` 等请求方法，进一步丰富了客户端与服务器的交互方式。
- **缓存控制**：引入了更强大的缓存控制机制（如 `Cache-Control` 头部），提高了缓存管理的灵活性。
- **虚拟主机支持**：通过 `Host` 头部，服务器可以在同一个 IP 地址上托管多个网站。
- **错误处理**：增强了错误处理能力，通过更多细致的状态码来反映错误。

#### 局限性：

- **队头阻塞（Head-of-Line Blocking）**：由于每个 TCP 连接是串行处理请求的，如果前一个请求较慢，后续的请求会被阻塞。
- **并行连接限制**：浏览器对同一域名的并行连接数有限制，通常是 6 个，这对页面有大量资源（图片、JS、CSS）的场景下性能不佳。

### 4. **HTTP/2 (2015)**

HTTP/2 是对 HTTP/1.1 的重大升级，专注于性能优化，解决了 HTTP/1.1 中的多个瓶颈问题。它基于 SPDY 协议（由 Google 开发），并被 IETF 标准化为 HTTP/2。

#### 主要特性：

- **多路复用（Multiplexing）**：允许在同一个 TCP 连接中并行处理多个请求和响应，彻底解决了 HTTP/1.1 的队头阻塞问题。多个请求不再按顺序执行，资源可以同时传输。
- **二进制分帧（Binary Framing）**：HTTP/2 将所有数据（头部、正文）都编码为二进制格式传输（而不是文本格式），提升了解析效率和传输可靠性。
- **头部压缩**：使用“首部表”跟踪和存储之前发送的键值对，只发送差异数据。减少了重复头部传输带来的开销，特别是对具有大量相似请求的场景效果显著。
- **服务器推送（Server Push）**：服务器会顺便把一些客户端需要的资源一起推送到客户端，如在响应一个页面请求中，就可以随同页面的其它资源，免得客户端再次创建连接发送请求到服务器端获取，这种方式非常合适加载静态资源。
- **优先级控制**：客户端可以指定请求的优先级，服务器可以根据优先级顺序传输资源，提高关键资源的加载速度。
![image.png](https://tazdingo-images.oss-cn-hongkong.aliyuncs.com/202410101455197.png)


#### 优势：
- 极大提升了并行加载能力和页面加载速度。
- 大幅减少了连接的数量和传输的数据量，降低了网络延迟。

#### 局限性：
- 依然基于 TCP 协议，仍然可能受 TCP 队头阻塞的影响。

### 5. **HTTP/3 (QUIC)**
HTTP/3 是 HTTP 协议的最新版本，基于 Google 的 QUIC 协议（Quick UDP Internet Connections）开发，目标是解决 TCP 协议固有的一些性能瓶颈，特别是 TCP 的队头阻塞问题。

#### 主要特性：
- **基于 UDP**：HTTP/3 使用 UDP（而非 TCP）作为底层传输协议，避免了 TCP 的队头阻塞问题。
- **连接迁移**：QUIC 支持连接迁移，客户端可以在网络环境变化（如切换 Wi-Fi 到 4G 网络）时，无需重新建立连接，从而提升了用户体验。
- **内置 TLS 加密**：QUIC 将加密（TLS 1.3）集成到协议中，提供了更快的握手时间，同时提升了安全性。
- **无队头阻塞**：HTTP/3 的多路复用彻底消除了 HTTP/2 中仍然可能存在的 TCP 层面的队头阻塞问题。

#### 优势：
- 更低的延迟，特别是在弱网环境或移动网络下效果显著。
- 握手速度快，提升了连接建立的效率和安全性。

END
<!--ID: 1726849380144-->
