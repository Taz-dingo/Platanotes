---
created: 星期四, 八月 22日 2024, 10:28:44 晚上, 1724336924000
modified: 星期四, 八月 22日 2024, 10:28:44 晚上, 1724336924000
---

## this绑定
this动态绑定，四条规则（优先级由高到低）：
1. new调用？绑定到新创建的对象
2. call、apply、bind显式绑定，绑定到指定对象
3. 通过上下文对象调用，隐式绑定到那个上下文对象
4. 默认绑定，在全局

### 箭头函数
箭头函数与众不同，继承外层函数的this绑定（类似在函数内声明了一个`var self = this`）


### 回调函数
### new干了什么
1. 创建一个对象`obj = {}`
2. 对象通过隐式原型链接到构造函数的prototype上。`obj = Object.create(func.prototype)`;
3. 构造函数this绑定到创建的对象上，执行一次`func.apply(obj)`
4. 如果构造函数没有返回对象，返回这个新对象



```js
const _new = function(fn, ...args) {
	/*
                1. 创建对象
                2. 新对象在原型链上链接上构造函数（obj.__proto__ = fn.prototype）
                3. this绑定到对象上执行构造函数
                4. 如果构造函数没有返回对象，返回新对象
                */

	const obj = Object.create(fn.prototype);
	const res = fn.apply(obj, args);
	return (res !== null && typeof res === 'object') ? res: obj;
}
```