## HTTP

### 概览

- 简单快速：客户向服务器请求服务时，只需传送请求方法和路径。由于HTTP协议简单，使得HTTP服务器的程序规模小，因而通信速度很快
    
- 灵活：HTTP允许传输任意类型的数据对象。正在传输的类型由Content-Type加以标记
    
- 无连接：无连接的含义是限制每次连接只处理一个请求。服务器处理完客户的请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间
    
- 无状态：HTTP协议无法根据之前的状态进行本次的请求处理


### 历史版本

### 1. HTTP/0.9

- **发布年份**: 1991年
- **特点**:
    - 最早的HTTP版本，主要用于传输HTML文档。
    - 非常简单的协议，只支持GET请求，且没有头部（headers）和状态码。
    - 响应内容是纯文本，无法处理多媒体和复杂的内容类型。

### 2. HTTP/1.0

- **发布年份**: 1996年（正式在RFC 1945中定义）
- **特点**:
    - 引入了HTTP头部（headers），支持更多的媒体类型和内容协商（content negotiation）。
    - 引入了POST和HEAD方法，增强了请求类型的多样性。
    - 响应包含状态码（例如200 OK, 404 Not Found）以表示请求结果。
    - 每个请求/响应后连接关闭（短连接），导致大量的TCP连接开销。

### 3. HTTP/1.1

- **发布年份**: 1997年（RFC 2068, 后续由RFC 2616替代并成为标准）
- **特点**:
    - 引入了持久连接（persistent connection），即同一TCP连接可以用于多个请求/响应，减少了连接开销。
    - 支持管道化（pipelining），允许客户端在收到响应前发送多个请求，但由于实现复杂且存在问题，实际使用较少。
    - 支持分块传输编码（chunked transfer encoding），允许服务器分块发送响应，适用于动态内容。
    - 增强了缓存控制、错误处理和虚拟主机的支持。

### 4. HTTP/2.0

- **发布年份**: 2015年（正式在RFC 7540中定义）
- **特点**:
    - **多路复用（Multiplexing）**: 允许在单个TCP连接中同时发送多个请求和响应，解决了HTTP/1.1中的队头阻塞问题，显著提高了网络资源的加载效率。
    - **二进制协议**: HTTP/2 使用二进制分帧层取代了HTTP/1.x中的文本格式，数据在传输时被转换为二进制帧，提高了数据传输和解析的效率。
    - **头部压缩**: 引入了HPACK算法，压缩请求和响应的头部，减少了带宽消耗，特别是在重复请求时头部内容冗余的问题得到解决。
    - **服务器推送（Server Push）**: 服务器可以同时发送多个响应，例如，当客户端请求一个HTML页面时，服务器可以同时推送CSS、JavaScript等资源，减少页面加载时间。
    - **更高的安全性**: 虽然HTTP/2允许非加密的传输，但大多数现代浏览器和实现都要求HTTP/2必须在HTTPS下运行，进一步提升了安全性。

多路复用：
1. **同一连接多请求并行处理**: 在 HTTP/2 中，多个请求可以在同一个 TCP 连接中**同时**发出，并且服务器可以在任意顺序下返回多个响应。这意味着每个请求和响应被分成多个小的二进制帧，这些帧可以交错传输，客户端根据帧的标识重新组装数据。
2. **无队头阻塞**: 不同于 HTTP/1.1 的长连接复用，HTTP/2 的多路复用不会因为一个请求的处理阻塞其他请求，极大地提高了效率，尤其在处理多个小文件（如图片、CSS、JS 文件）时表现出色。